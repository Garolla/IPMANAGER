IP-CORE MANAGER FOR FPGA-BASED DESIGNS

USER MANUAL


 1.  INTRODUCTION

The IP-core manager is an interface for the integration of multiple custom IP designs in the secube platform. It handles context switching, interrupt handling and scheduling, guaranteeing the correct exchange of data between the target IP and the CPU.


This guide describes the interface of the IP core manager, and is meant to assist developers and hardware designers in correctly implementing custom IP cores as well as the software that interacts with them.


 2.  FEATURE OVERVIEW

    CPU-initiated transactions (only one IP enabled at a time)
    Buffered R/W data flow
    Interrupt functionality


 3.  INTERFACE TO THE CPU

{ incollate qui la lista delle porte del data buffer }


After the cores are synthesized and running, the CPU can enable or disable the cores, load input data into them and read their output through the IP manager.

To do this, the CPU must initiate a transaction when it is ready to exchange data with a chosen core. 


3.1 INITIATING A TRANSACTION 

    initiate or end a transaction by writing a 16-bit data packet at address row 0. To begin the transaction, bit 12 must be set (=1); to end the transaction, it must be unset (=0).


{ incollate qui la struttura del data packet }


    Specify the address of the target IP. Addresses are assigned sequentially from 1 to N.
    To write the data packet, set the signals as follows:
    Data: your instruction packet in the above format
    Address: 0
    W_enable: 1
    R_enable: 0 
    Generic_en: 1

    NOTE: generic_en must be set to 1 whenever communication with the IP manager is in progress.
    
    NOTE: only one IP can be enabled at any time. If a new IP is enabled, all other IPs will be disabled, even if their transaction was not explicitly closed.


3.2 WRITING DATA TO THE IP CORE

Once a core is selected, the IP manager becomes transparent to read/write operations between core and CPU. Each core has access to a range of addresses which is freely assigned by the IP core's designer. Then, it is simply a matter of reading and writing to these addresses according to the specifications of the selected core.

To write data, set the signals as follows:

    Data: the 16-bit data to be sent
    Address: the IP's read address (refer to the IP core's documentation)
    W_enable: 1
    R_enable: 0 
    Generic_en: 1


3.3 READING DATA FROM THE IP CORE

To write data, set the signals as follows:

    Data: don't care
    Address: the IP's write address (refer to the IP core's documentation)
    W_enable: 0
    R_enable: 1
    Generic_en: 1


3.4 ENDING A TRANSACTION

To end a transaction, follow the steps in 3.1, and set bit 12 of the instruction packet to 0. The IP core will be unselected and disabled.


4. INTERFACE TO THE IP CORES

IP cores designed for the multi-IP core system must comply to the following interface:


{ incollate qui la lista delle porte dell'IP manager }




